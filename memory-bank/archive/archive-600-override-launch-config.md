# Архив: Переопределение конфигурации запуска через параметры запуска 1С

- Идентификатор задачи: 600-override-launch-config
- Ветка: feature/600-override-launch-config
- Дата архивации: 2025-08-13
- Статус тестов: 26/26 пройдено (100% покрытие)
- Issue: [#600](https://github.com/bia-technologies/yaxunit/issues/600)

## Краткое описание
Реализован механизм переопределения параметров конфигурации запуска через параметры командной строки 1С с поддержкой относительных путей и приоритетом CLI над файлом конфигурации.

## Основные изменения

### Модули
- `exts/yaxunit/src/CommonModules/ЮТПараметрыЗапускаСлужебный/Module.bsl`:
  - Добавлена функция `ПарсингДополнительныхПараметров()` для обработки параметров после `;`
  - Добавлена функция `СлитьПараметры()` для слияния с приоритетом CLI > файл > умолчания
  - Добавлена функция `РазрешитьОтносительныйПуть()` для обработки относительных путей
  - Модифицирована функция `ПереданныеПараметрыТестирования()` для поддержки нового формата

- `exts/yaxunit/src/CommonModules/ЮТФабрика/Module.bsl`:
  - Добавлен параметр `workspacePath` в структуру `ПараметрыЗапуска()`

### Тесты
- `tests/src/CommonModules/ОМ_ЮТПараметрыЗапускаСлужебный/Module.bsl`:
  - 26 тестов для проверки парсинга дополнительных параметров
  - Тесты слияния параметров с приоритетом
  - Тесты разрешения относительных путей
  - Тесты обратной совместимости

### Документация
- `documentation/docs/getting-started/run/configuration.md`:
  - Обновлено описание параметров командной строки
  - Добавлены примеры использования нового формата
  - Описана логика разрешения относительных путей

## Новая функциональность

### Формат параметров командной строки
```
/Execute ЮТест /C"RunUnitTests=config.json;reportPath=./reports;reportFormat=allure"
```

### Приоритет параметров (от высшего к низшему)
1. **Параметры командной строки** (после `;`)
2. **Файл конфигурации JSON**
3. **Значения по умолчанию**

### Логика разрешения относительных путей
1. **`workspacePath`** - если указан этот параметр
2. **`projectPath`** - если указан и нет `workspacePath`
3. **Текущий каталог** - если не указаны предыдущие

### Поддерживаемые параметры для переопределения
- `reportPath` - путь к отчету
- `reportFormat` - формат отчета (jUnit, JSON, allure)
- `closeAfterTests` - закрытие после тестов
- `showReport` - показать отчет
- `workspacePath` - базовый каталог для относительных путей
- `projectPath` - путь к проекту
- `exitCode` - файл кода выхода
- `logging.file` - файл логирования
- `reports[].path` - пути в множественных отчетах

## Результаты тестов
- Модуль: `ОМ_ЮТПараметрыЗапускаСлужебный`
- Всего тестов: 26
- Пройдено: 26 (100%)
- Покрытие: 100% новой функциональности

### Группы тестов
1. **Парсинг дополнительных параметров** (8 тестов)
2. **Слияние параметров** (6 тестов)
3. **Разрешение относительных путей** (8 тестов)
4. **Обратная совместимость** (4 теста)

## Совместимость
- Полная обратная совместимость с существующими конфигурациями
- Старый формат `RunUnitTests=config.json` продолжает работать
- Новый формат `RunUnitTests=config.json;param=value` добавляет переопределения

## Критерии приемки
✅ Параметры командной строки могут переопределить настройки из JSON файла  
✅ Поддержка формата `RunUnitTests=config.json;reportPath=./reports;reportFormat=allure`  
✅ Поддержка нового параметра `workspacePath`  
✅ Логика разрешения относительных путей: workspacePath → projectPath → текущий каталог  
✅ Обратная совместимость с существующими конфигурациями  
✅ Документация обновлена с примерами использования  
✅ Покрытие тестами новой функциональности не менее 80% (26 тестов, 100% пройдено)  
✅ Архитектура готова для будущих источников параметров  

## Архитектурные решения
- Приоритет CLI над файлом обеспечивает гибкость в CI/CD
- Поддержка относительных путей упрощает работу в разных окружениях
- Архитектура готова для будущих источников (переменные среды, дополнительный файл)
- Функциональность реализована без нарушения существующих контрактов

## Ссылки
- Issue: [#600](https://github.com/bia-technologies/yaxunit/issues/600)
- Milestone: YAxUnit 25.05
- Рефлексия: `memory-bank/reflection/reflection-600-override-launch-config.md`
- Креатив: `memory-bank/creative/creative-600-override-launch-config.md`

## Примечания
- Ветка готова к созданию Pull Request
- Все изменения протестированы и задокументированы
- Функциональность критична для удобства CI/CD интеграции
