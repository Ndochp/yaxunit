//©///////////////////////////////////////////////////////////////////////////©//
//
//  Copyright 2021-2025 BIA-Technologies Limited Liability Company
//
//  Licensed under the Apache License, Version 2.0 (the "License");
//  you may not use this file except in compliance with the License.
//  You may obtain a copy of the License at
//
//      http://www.apache.org/licenses/LICENSE-2.0
//
//  Unless required by applicable law or agreed to in writing, software
//  distributed under the License is distributed on an "AS IS" BASIS,
//  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
//  See the License for the specific language governing permissions and
//  limitations under the License.
//
//©///////////////////////////////////////////////////////////////////////////©//

#Область СлужебныйПрограммныйИнтерфейс

Процедура ИсполняемыеСценарии() Экспорт
	
	ЮТТесты
		.ДобавитьТест("СоответствуетПредикату")
		.ДобавитьТест("СоответствуетПредикату_ОписаниеПроверки")
		.ДобавитьТест("СоответствуетПредикату_СложныеУсловия")
		.ДобавитьТест("СоответствуетПредикату_ГраничныеСлучаи")
		.ДобавитьТест("КаждыйЭлементСоответствуетПредикату")
		.ДобавитьТест("КаждыйЭлементСоответствуетПредикату_ПустаяКоллекция")
		.ДобавитьТест("КаждыйЭлементСоответствуетПредикату_ОдинЭлемент")
		.ДобавитьТест("ЛюбойЭлементСоответствуетПредикату")
		.ДобавитьТест("ЛюбойЭлементСоответствуетПредикату_ПустаяКоллекция")
		.ДобавитьТест("ЛюбойЭлементСоответствуетПредикату_ОписаниеПроверки")
		.ДобавитьТест("СодержитПредикат")
		.ДобавитьТест("СодержитПредикат_РазныеТипыКоллекций")
		.ДобавитьТест("СодержитПредикат_ПустаяКоллекция")
		.ДобавитьТест("НеСодержитПредикат")
		.ДобавитьТест("НеСодержитПредикат_ОписаниеПроверки")
	;
	
КонецПроцедуры

Процедура СоответствуетПредикату() Экспорт
	
	Дата = ЮТест.Данные().СлучайнаяДата();
	
	Объект = Новый Структура;
	Объект.Вставить("Число", 1);
	Объект.Вставить("Строка", "1");
	Объект.Вставить("Дата", Дата);
	Объект.Вставить("Массив", ЮТКоллекции.ЗначениеВМассиве(1, "1"));
	
	ПроверкаЧисла = ЮТест.Предикат().Реквизит("Число").ИмеетТип(Тип("Число")).БольшеИлиРавно(1).МеньшеИлиРавно(10).Получить();
	ПроверкаДаты = ЮТест.Предикат().Реквизит("Дата").ИмеетТип(Новый ОписаниеТипов("Дата")).Равно(Дата).Получить();
	
	ЮТест.ОжидаетЧто(Объект)
		.СоответствуетПредикату(ЮТест.Предикат()
			.Заполнено()
			.ИмеетТип("Структура"))
		.СоответствуетПредикату(ПроверкаЧисла)
		.СоответствуетПредикату(ПроверкаДаты)
		;
	
	ПроверитьОшибкуСоответствуетПредикату(8, ЮТест.Предикат().Равно(10), "проверяемое значение `8` равно `10`");
	
	Попытка
		Ошибка = Неопределено;
		ЮТест.ОжидаетЧто(Объект).СоответствуетПредикату(ЮТест.Предикат().Реквизит("Число").Равно(10));
	Исключение
		Ошибка = ИнформацияОбОшибке();
	КонецПопытки;
	
	Объект.Число = -10;
	ПроверитьОшибкуСоответствуетПредикату(Объект, ПроверкаЧисла, "проверяемое значение `Структура` содержит свойство `Число`, которое больше или равно `1`");
	
КонецПроцедуры

Процедура СоответствуетПредикату_ОписаниеПроверки() Экспорт
	
	Объект = Новый Структура("Число, Строка", 5, "Тест");
	
	ЮТест.ОжидаетЧто(Объект, "Проверка объекта")
		.СоответствуетПредикату(ЮТест.Предикат().Реквизит("Число").Равно(5), "Число должно быть равно 5")
		.СоответствуетПредикату(ЮТест.Предикат().Реквизит("Строка").Равно("Тест"), "Строка должна быть равна 'Тест'");
	
	ПроверитьОшибкуСоответствуетПредикату(Объект, ЮТест.Предикат().Реквизит("Число").Равно(10), "Число должно быть равно 10", "Число должно быть равно 10", "Проверка с описанием");
	
КонецПроцедуры

Процедура СоответствуетПредикату_СложныеУсловия() Экспорт
	
	Объект = Новый Структура("Число, Строка, Дата, Булево", 5, "Тест", ТекущаяДата(), Истина);
	
	// Предикат с несколькими условиями для разных свойств
	Предикат = ЮТест.Предикат()
		.Реквизит("Число").Больше(0)
		.Реквизит("Число").Меньше(10)
		.Реквизит("Строка").Равно("Тест")
		.Реквизит("Булево").Равно(Истина)
		.Получить();
	
	ЮТест.ОжидаетЧто(Объект)
		.СоответствуетПредикату(Предикат);
	
	// Проверка с условиями на сам объект
	ЮТест.ОжидаетЧто(Объект)
		.СоответствуетПредикату(ЮТест.Предикат()
			.Заполнено()
			.ИмеетТип("Структура")
			.ИмеетСвойство("Число")
			.ИмеетСвойство("Строка")
			.ИмеетСвойство("Дата")
			.ИмеетСвойство("Булево"));
	
	// Негативный тест - число не соответствует диапазону
	Объект.Число = 15;
	ПроверитьОшибкуСоответствуетПредикату(Объект, Предикат, "проверяемое значение `Структура` содержит свойство `Число`, которое меньше чем `10`");
	
	// Негативный тест - строка не соответствует
	Объект.Число = 5;
	Объект.Строка = "Другой";
	ПроверитьОшибкуСоответствуетПредикату(Объект, Предикат, "проверяемое значение `Структура` содержит свойство `Строка`, которое равно `Тест`");
	
КонецПроцедуры

Процедура СоответствуетПредикату_ГраничныеСлучаи() Экспорт
	
	// Проверка с Null и Неопределено через свойства объектов
	ОбъектСНеопределенным = Новый Структура("Значение", Неопределено);
	ЮТест.ОжидаетЧто(ОбъектСНеопределенным)
		.СоответствуетПредикату(ЮТест.Предикат().Реквизит("Значение").НеЗаполнено());
	
	// Проверка с пустым предикатом (только базовые условия)
	Объект = Новый Структура();
	ЮТест.ОжидаетЧто(Объект)
		.СоответствуетПредикату(ЮТест.Предикат().ИмеетТип("Структура"));
	
	// Проверка с предикатом для несуществующего свойства
	Объект = Новый Структура("Число", 1);
	ПроверитьОшибкуСоответствуетПредикату(Объект, ЮТест.Предикат().Реквизит("Несуществующее").Равно(1), "проверяемое значение `Структура` содержит свойство `Несуществующее`");
	
	// Проверка с числовыми границами
	ЮТест.ОжидаетЧто(10)
		.СоответствуетПредикату(ЮТест.Предикат().БольшеИлиРавно(10).МеньшеИлиРавно(10));
	
	ЮТест.ОжидаетЧто(5)
		.СоответствуетПредикату(ЮТест.Предикат().Больше(0).Меньше(10));
	
КонецПроцедуры

Процедура КаждыйЭлементСоответствуетПредикату() Экспорт
	
	Дата = ЮТест.Данные().СлучайнаяДата();
	Объект = Новый Структура;
	Объект.Вставить("Число", 1);
	Объект.Вставить("Строка", "1");
	Объект.Вставить("Дата", Дата);
	Объект.Вставить("Массив", ЮТКоллекции.ЗначениеВМассиве(1, "1"));
	
	Объект2 = ПомощникТестированияВызовСервера.СоздатьКопию(Объект);
	
	Коллекция = ЮТКоллекции.ЗначениеВМассиве(Объект, Объект2);
	
	Предикаты = ЮТест.Предикат()
		.ИмеетТип("Структура")
		.ИмеетСвойство("Число")
		.ИмеетСвойство("Строка")
		.ИмеетСвойство("Дата")
		.ИмеетСвойство("Массив")
		.Реквизит("Число").Равно(1)
		.Реквизит("Строка").Равно("1")
		.Реквизит("Дата").Равно(Дата)
		.Реквизит("Массив").ИмеетТип("Массив")
		.Реквизит("Массив").ИмеетДлину(2)
		;
	
	ЮТест.ОжидаетЧто(Коллекция).КаждыйЭлементСоответствуетПредикату(Предикаты);
	
	Объект2.Число = 5;
	Сообщение = СтрШаблон("каждый элемент проверяемого значения `%1` содержит свойство `Число`, которое равно `1`", Коллекция);
	ПроверитьОшибкуКаждыйЭлементСоответствуетПредикату(Коллекция, Предикаты, Сообщение);
	
КонецПроцедуры

Процедура ЛюбойЭлементСоответствуетПредикату() Экспорт
	
	Дата = '20200220130001';
	Объект = Новый Структура("Число, Строка, Дата, Массив", 1, "2", Дата, ЮТКоллекции.ЗначениеВМассиве(3, "1"));
	Объект2 = Новый Структура("Число, Строка, Дата, Массив", 2, "1", Дата, ЮТКоллекции.ЗначениеВМассиве(1, "3"));
	Коллекция = ЮТКоллекции.ЗначениеВМассиве(Объект, Объект2);
	
	ЮТест.ОжидаетЧто(Коллекция).ЛюбойЭлементСоответствуетПредикату(Ютест.Предикат().Реквизит("Число").Равно(2));
	ЮТест.ОжидаетЧто(Коллекция).ЛюбойЭлементСоответствуетПредикату(Ютест.Предикат().Реквизит("Число").Равно(1));
	
	Сообщение = СтрШаблон("один из элементов проверяемого значения `%1` является заполненным и имеет тип `Массив`", Коллекция);
	ПроверитьОшибкуЛюбойЭлементСоответствуетПредикату(Коллекция, Ютест.Предикат().Заполнено().ИмеетТип("Массив"), Сообщение);
	
	Сообщение = СтрШаблон("один из элементов проверяемого значения `%1` содержит свойство `Число`, которое равно `3`", Коллекция);
	ПроверитьОшибкуЛюбойЭлементСоответствуетПредикату(Коллекция, Ютест.Предикат().Реквизит("Число").Равно(3), Сообщение);
	
КонецПроцедуры

Процедура СодержитПредикат() Экспорт
	
	Структура = Новый Структура("Свойство, Свойство2", 1, 2);
	Коллекция = ЮТКоллекции.ЗначениеВМассиве("1", 1, Структура);
	
	ЮТест.ОжидаетЧто(Коллекция)
		.Содержит(ЮТест.Предикат().Равно(1), "Предикат из общего модуля")
		.Содержит(ЮТест.Предикат().Равно(1).Получить(), "Сохраненный предикат")
		.Содержит(ЮТест.Предикат().Реквизит("Свойство").Равно(1), "Проверка свойства")
		;
	
	ПроверитьОшибкуСодержит(Коллекция, ЮТест.Предикат().Равно(2), "проверяемое значение `Массив` содержит элемент, значение которого равно `2`");
	
	ПроверитьОшибкуСодержит(Коллекция, ЮТест.Предикат().Реквизит("Свойство").Равно(2), "элемент, значение которого содержит свойство `Свойство`, которое равно `2`");
	
	ПроверитьОшибкуСодержит(Коллекция, ЮТест.Предикат().Реквизит("Свойство").Равно(1).ИмеетТип("Строка"), "элемент, значение которого содержит свойство `Свойство`, которое равно `1` и имеет тип `Строка`");
	
	ЮТест.ОжидаетЧто(Структура)
		.Содержит(ЮТест.Предикат().Реквизит("Ключ").Равно("Свойство2"), "Проверка структуры");
	
КонецПроцедуры

Процедура НеСодержитПредикат() Экспорт
	
	Структура = Новый Структура("Свойство, Свойство2", 1, 2);
	Коллекция = ЮТКоллекции.ЗначениеВМассиве("1", 1, Структура);
	
	ЮТест.ОжидаетЧто(Коллекция)
		.НеСодержит(ЮТест.Предикат().Равно(2), "Предикат из общего модуля")
		.НеСодержит(ЮТест.Предикат().Равно(2).Получить(), "Сохраненный предикат")
		.НеСодержит(ЮТест.Предикат().Реквизит("Свойство").Равно(2), "Проверка свойства")
		;
	
	ПроверитьОшибкуНеСодержит(Коллекция, ЮТест.Предикат().Равно(1), "проверяемое значение `Массив` не содержит элемент, значение которого равно `1`");
	
КонецПроцедуры

Процедура КаждыйЭлементСоответствуетПредикату_ПустаяКоллекция() Экспорт
	
	ПустаяКоллекция = Новый Массив;
	
	// Пустая коллекция всегда проходит проверку "каждый элемент"
	ЮТест.ОжидаетЧто(ПустаяКоллекция)
		.КаждыйЭлементСоответствуетПредикату(ЮТест.Предикат().Равно(1));
	
	ЮТест.ОжидаетЧто(ПустаяКоллекция)
		.КаждыйЭлементСоответствуетПредикату(ЮТест.Предикат()
			.ИмеетТип("Структура")
			.Реквизит("Число").Равно(5));
	
КонецПроцедуры

Процедура КаждыйЭлементСоответствуетПредикату_ОдинЭлемент() Экспорт
	
	Объект = Новый Структура("Число, Строка", 5, "Тест");
	Коллекция = ЮТКоллекции.ЗначениеВМассиве(Объект);
	
	// Позитивный тест - один элемент соответствует
	ЮТест.ОжидаетЧто(Коллекция)
		.КаждыйЭлементСоответствуетПредикату(ЮТест.Предикат()
			.ИмеетТип("Структура")
			.Реквизит("Число").Равно(5)
			.Реквизит("Строка").Равно("Тест"));
	
	// Негативный тест - один элемент не соответствует
	ПроверитьОшибкуКаждыйЭлементСоответствуетПредикату(Коллекция, ЮТест.Предикат().Реквизит("Число").Равно(10), "каждый элемент проверяемого значения `Массив` содержит свойство `Число`, которое равно `10`");
	
КонецПроцедуры

Процедура ЛюбойЭлементСоответствуетПредикату_ПустаяКоллекция() Экспорт
	
	ПустаяКоллекция = Новый Массив;
	
	// Пустая коллекция не содержит ни одного элемента, соответствующего предикату
	ПроверитьОшибкуЛюбойЭлементСоответствуетПредикату(ПустаяКоллекция, ЮТест.Предикат().Равно(1), "один из элементов проверяемого значения `Массив` равно `1`");
	
КонецПроцедуры

Процедура ЛюбойЭлементСоответствуетПредикату_ОписаниеПроверки() Экспорт
	
	Объект = Новый Структура("Число", 1);
	Объект2 = Новый Структура("Число", 2);
	Коллекция = ЮТКоллекции.ЗначениеВМассиве(Объект, Объект2);
	
	// Позитивный тест с описанием
	ЮТест.ОжидаетЧто(Коллекция, "Проверка коллекции")
		.ЛюбойЭлементСоответствуетПредикату(ЮТест.Предикат().Реквизит("Число").Равно(1), "Должен быть элемент с числом 1")
		.ЛюбойЭлементСоответствуетПредикату(ЮТест.Предикат().Реквизит("Число").Равно(2), "Должен быть элемент с числом 2");
	
	// Негативный тест с описанием
	ПроверитьОшибкуЛюбойЭлементСоответствуетПредикату(Коллекция, ЮТест.Предикат().Реквизит("Число").Равно(5), "Должен быть элемент с числом 5", "Должен быть элемент с числом 5", "Проверка с описанием");
	
КонецПроцедуры

Процедура СодержитПредикат_РазныеТипыКоллекций() Экспорт
	
	// Тест с массивом
	Массив = ЮТКоллекции.ЗначениеВМассиве(1, 2, 3);
	ЮТест.ОжидаетЧто(Массив)
		.Содержит(ЮТест.Предикат().Равно(2));
	
	// Тест со структурой
	Структура = Новый Структура("Ключ1, Ключ2, Ключ3", 1, 2, 3);
	ЮТест.ОжидаетЧто(Структура)
		.Содержит(ЮТест.Предикат().Реквизит("Ключ").Равно("Ключ2"));
	
	// Тест с соответствием
	Соответствие = Новый Соответствие;
	Соответствие.Вставить("Ключ1", 1);
	Соответствие.Вставить("Ключ2", 2);
	Соответствие.Вставить("Ключ3", 3);
	ЮТест.ОжидаетЧто(Соответствие)
		.Содержит(ЮТест.Предикат().Реквизит("Ключ").Равно("Ключ2"));
	
	// Тест с массивом структур
	Структура1 = Новый Структура("Число", 1);
	Структура2 = Новый Структура("Число", 2);
	Структура3 = Новый Структура("Число", 3);
	МассивСтруктур = ЮТКоллекции.ЗначениеВМассиве(Структура1, Структура2, Структура3);
	ЮТест.ОжидаетЧто(МассивСтруктур)
		.Содержит(ЮТест.Предикат().Реквизит("Число").Равно(2));
	
КонецПроцедуры

Процедура СодержитПредикат_ПустаяКоллекция() Экспорт
	
	ПустаяКоллекция = Новый Массив;
	
	// Пустая коллекция не содержит элементов
	ПроверитьОшибкуСодержит(ПустаяКоллекция, ЮТест.Предикат().Равно(1), "проверяемое значение `Массив` содержит элемент, значение которого равно `1`");
	
	// Пустая структура не содержит ключей
	ПустаяСтруктура = Новый Структура;
	ПроверитьОшибкуСодержит(ПустаяСтруктура, ЮТест.Предикат().Реквизит("Ключ").Равно("Несуществующий"), "элемент, значение которого содержит свойство `Ключ`, которое равно `Несуществующий`");
	
КонецПроцедуры

Процедура НеСодержитПредикат_ОписаниеПроверки() Экспорт
	
	Коллекция = ЮТКоллекции.ЗначениеВМассиве(1, 2, 3);
	
	// Позитивный тест с описанием
	ЮТест.ОжидаетЧто(Коллекция, "Проверка отсутствия элемента")
		.НеСодержит(ЮТест.Предикат().Равно(5), "Элемент 5 не должен присутствовать")
		.НеСодержит(ЮТест.Предикат().Равно(10), "Элемент 10 не должен присутствовать");
	
	// Негативный тест с описанием
	ПроверитьОшибкуНеСодержит(Коллекция, ЮТест.Предикат().Равно(2), "Элемент 2 не должен присутствовать", "Элемент 2 не должен присутствовать", "Проверка с описанием");
	
КонецПроцедуры

#КонецОбласти

#Область СлужебныеПроцедурыИФункции

Функция ОшибкаУтверждения(ПроверяемоеЗначение, Утверждение, Параметр)
	
	Параметры = ЮТКоллекции.ЗначениеВМассиве(Параметр);
	ЮТест.ОжидаетЧто(ПроверяемоеЗначение);
	Ошибка = ЮТМетодыСлужебный.ВыполнитьМетодКонфигурацииСПерехватомОшибки("ЮТУтверждения", Утверждение, Параметры);
	
	Возврат Ошибка;
	
КонецФункции

// Проверка ошибки для метода СоответствуетПредикату
// Параметры:
//   ПроверяемоеЗначение - значение для проверки
//   Предикат - предикат для проверки
//   ОжидаемоеОписание - ожидаемое описание ошибки
//   ОписаниеПроверки - опциональное описание проверки
//   ОписаниеЗначения - опциональное описание проверяемого значения
Процедура ПроверитьОшибкуСоответствуетПредикату(ПроверяемоеЗначение, Предикат, ОжидаемоеОписание, ОписаниеПроверки = Неопределено, ОписаниеЗначения = Неопределено)
	
	Ошибка = Неопределено;
	
	Попытка
		ЮТест.ОжидаетЧто(ПроверяемоеЗначение, ОписаниеЗначения)
			.СоответствуетПредикату(Предикат, ОписаниеПроверки);
	Исключение
		Ошибка = ИнформацияОбОшибке();
	КонецПопытки;
	
	ПроверитьОшибкуУтверждения(Ошибка, ОжидаемоеОписание);
	
КонецПроцедуры

// Проверка ошибки для метода Содержит
// Параметры:
//   ПроверяемоеЗначение - значение для проверки
//   Предикат - предикат для проверки
//   ОжидаемоеОписание - ожидаемое описание ошибки
//   ОписаниеПроверки - опциональное описание проверки
//   ОписаниеЗначения - опциональное описание проверяемого значения
Процедура ПроверитьОшибкуСодержит(ПроверяемоеЗначение, Предикат, ОжидаемоеОписание, ОписаниеПроверки = Неопределено, ОписаниеЗначения = Неопределено)
	
	Ошибка = Неопределено;
	
	Попытка
		ЮТест.ОжидаетЧто(ПроверяемоеЗначение, ОписаниеЗначения)
			.Содержит(Предикат, ОписаниеПроверки);
	Исключение
		Ошибка = ИнформацияОбОшибке();
	КонецПопытки;
	
	ПроверитьОшибкуУтверждения(Ошибка, ОжидаемоеОписание);
	
КонецПроцедуры

// Проверка ошибки для метода НеСодержит
// Параметры:
//   ПроверяемоеЗначение - значение для проверки
//   Предикат - предикат для проверки
//   ОжидаемоеОписание - ожидаемое описание ошибки
//   ОписаниеПроверки - опциональное описание проверки
//   ОписаниеЗначения - опциональное описание проверяемого значения
Процедура ПроверитьОшибкуНеСодержит(ПроверяемоеЗначение, Предикат, ОжидаемоеОписание, ОписаниеПроверки = Неопределено, ОписаниеЗначения = Неопределено)
	
	Ошибка = Неопределено;
	
	Попытка
		ЮТест.ОжидаетЧто(ПроверяемоеЗначение, ОписаниеЗначения)
			.НеСодержит(Предикат, ОписаниеПроверки);
	Исключение
		Ошибка = ИнформацияОбОшибке();
	КонецПопытки;
	
	ПроверитьОшибкуУтверждения(Ошибка, ОжидаемоеОписание);
	
КонецПроцедуры

// Проверка ошибки для метода КаждыйЭлементСоответствуетПредикату
// Параметры:
//   ПроверяемоеЗначение - значение для проверки
//   Предикат - предикат для проверки
//   ОжидаемоеОписание - ожидаемое описание ошибки
//   ОписаниеПроверки - опциональное описание проверки
//   ОписаниеЗначения - опциональное описание проверяемого значения
Процедура ПроверитьОшибкуКаждыйЭлементСоответствуетПредикату(ПроверяемоеЗначение, Предикат, ОжидаемоеОписание, ОписаниеПроверки = Неопределено, ОписаниеЗначения = Неопределено)
	
	Ошибка = Неопределено;
	
	Попытка
		ЮТест.ОжидаетЧто(ПроверяемоеЗначение, ОписаниеЗначения)
			.КаждыйЭлементСоответствуетПредикату(Предикат, ОписаниеПроверки);
	Исключение
		Ошибка = ИнформацияОбОшибке();
	КонецПопытки;
	
	ПроверитьОшибкуУтверждения(Ошибка, ОжидаемоеОписание);
	
КонецПроцедуры

// Проверка ошибки для метода ЛюбойЭлементСоответствуетПредикату
// Параметры:
//   ПроверяемоеЗначение - значение для проверки
//   Предикат - предикат для проверки
//   ОжидаемоеОписание - ожидаемое описание ошибки
//   ОписаниеПроверки - опциональное описание проверки
//   ОписаниеЗначения - опциональное описание проверяемого значения
Процедура ПроверитьОшибкуЛюбойЭлементСоответствуетПредикату(ПроверяемоеЗначение, Предикат, ОжидаемоеОписание, ОписаниеПроверки = Неопределено, ОписаниеЗначения = Неопределено)
	
	Ошибка = Неопределено;
	
	Попытка
		ЮТест.ОжидаетЧто(ПроверяемоеЗначение, ОписаниеЗначения)
			.ЛюбойЭлементСоответствуетПредикату(Предикат, ОписаниеПроверки);
	Исключение
		Ошибка = ИнформацияОбОшибке();
	КонецПопытки;
	
	ПроверитьОшибкуУтверждения(Ошибка, ОжидаемоеОписание);
	
КонецПроцедуры

Процедура ПроверитьОшибкуУтверждения(ИнформацияОбОшибке, ОжидаемоеОписание)
	
	Если ИнформацияОбОшибке = Неопределено Тогда
		
		Сообщение = СтрШаблон("Ожидали, что возникнет ошибка утверждений [%1]", ОжидаемоеОписание);
		ЮТРегистрацияОшибокСлужебный.УстановитьДанныеОшибкиСравнения("", ОжидаемоеОписание);
		
	ИначеЕсли НЕ СтрНачинаетсяС(ИнформацияОбОшибке.Описание, "[Failed]") Тогда
		
		Сообщение = СтрШаблон("Ожидали поймать ошибку утверждений [%1], а получили ошибку исполнения [%2]", ОжидаемоеОписание, ИнформацияОбОшибке.Описание);
		ЮТРегистрацияОшибокСлужебный.УстановитьДанныеОшибкиСравнения(ИнформацияОбОшибке.Описание, ОжидаемоеОписание);
		
	ИначеЕсли СтрНайти(ИнформацияОбОшибке.Описание, ОжидаемоеОписание) = 0 Тогда
		
		Сообщение = СтрШаблон("Ожидали поймать ошибку [%1], а получили [%2]", ОжидаемоеОписание, ИнформацияОбОшибке.Описание);
		ЮТРегистрацияОшибокСлужебный.УстановитьДанныеОшибкиСравнения(ИнформацияОбОшибке.Описание, ОжидаемоеОписание);
		
	КонецЕсли;
	
	Если ЗначениеЗаполнено(Сообщение) Тогда
		ЮТРегистрацияОшибокСлужебный.ВызватьОшибкуПроверки(Сообщение);
	КонецЕсли;
	
КонецПроцедуры

#КонецОбласти
